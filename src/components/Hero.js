import React, { useEffect, useState, useContext } from 'react';
import { StormwellContext } from '../App';
import { gsap } from 'gsap';
import { ScrollTrigger } from 'gsap/ScrollTrigger';
import { small, medium, large, lime, hero } from '../images/hero';

gsap.registerPlugin(ScrollTrigger);

const Hero = () => {
    const { heroEl } = useContext(StormwellContext);
    const [firstTime, setFirstTime] = useState(sessionStorage.getItem('first') === 'true' ? true : false);

    useEffect(() => {
        let bodyTag = document.querySelector('.hero').parentElement.parentElement.parentElement;

        if(!sessionStorage.getItem('first')) {
            sessionStorage.setItem('first', 'true')
            setFirstTime(true)

            gsap.timeline()
                .to('.stormwell', { duration: 3.4 })
                .to('.stormwell path', { stroke: "#FF8B60" })
                .to('.opacity__wall', { y: "-100%", duration: 1.5 })
                .to('.opacity__wall__msg', { color: "white", duration: .1 }, '-=1.25')
                .to(bodyTag, { className: "+=visible" })
                .to('.hero', { className: "+=hero visible" }, '<')
                .to('.lime', { opacity: 0.9, duration: 1.5 }, '<')
                .to('.textbox__vodka', { opacity: 1 }, '<');
        } else {
            sessionStorage.setItem('first', 'false')
            setFirstTime(false)
            bodyTag.className = 'visible'
        }

        gsap.timeline({
            scrollTrigger: {
                trigger: '.hero',
                start: "top top",
                end: "+=100%",
                scrub: true,
                invalidateOnRefresh: true
            }
        }).to('.hero__img__container', { y: "40%", duration: 1 })
            .to('.ice--medium', { y: "20%", duration: 1 }, '<')
            .to('.ice--large', { rotate: 1 }, '<')

        gsap.timeline({
            scrollTrigger: {
                trigger: heroEl.current,
                start: "top top",
                end: '+=6000',
                scrub: true,
            }
        }).to('.lime', { rotation: 360 * 6, duration: 1 })
    }, [])


    return (
        <section className="hero" ref={heroEl}>
            <div className={`opacity__wall ${firstTime ? '' : 'hidden'}`}>
                <div className="opacity__wall__film" />
                <p className="opacity__wall__msg">Drink Responsibly.</p>
            </div>
            <div className="hero__textbox">
                <p className="textbox__introducing">Introducing</p>
                {/* <svg className="stormwell stormwell--mobile" width="442" height="286" viewBox="0 0 442 286" fill="none" xmlns="http://www.w3.org/2000/svg">
                    <path d="M35.5192 97.296C28.9912 97.296 22.5592 96.576 16.2232 95.136C9.88723 93.6 4.79923 91.632 0.959229 89.232L9.16723 70.512C12.7192 72.72 16.9432 74.496 21.8392 75.84C26.7352 77.088 31.5832 77.712 36.3832 77.712C40.7992 77.712 43.9192 77.28 45.7432 76.416C47.6632 75.456 48.6232 74.112 48.6232 72.384C48.6232 70.656 47.4712 69.456 45.1672 68.784C42.9592 68.016 39.4072 67.296 34.5112 66.624C28.2712 65.856 22.9432 64.848 18.5272 63.6C14.2072 62.352 10.4632 60.048 7.29523 56.688C4.12723 53.328 2.54323 48.624 2.54323 42.576C2.54323 37.584 4.03122 33.168 7.00723 29.328C9.98323 25.392 14.3032 22.32 19.9672 20.112C25.7272 17.808 32.5912 16.656 40.5592 16.656C46.2232 16.656 51.8392 17.232 57.4072 18.384C62.9752 19.536 67.6312 21.168 71.3752 23.28L63.1672 41.856C56.2552 38.016 48.7672 36.096 40.7032 36.096C36.3832 36.096 33.2152 36.624 31.1992 37.68C29.1832 38.64 28.1752 39.936 28.1752 41.568C28.1752 43.392 29.2792 44.688 31.4872 45.456C33.6952 46.128 37.3432 46.848 42.4312 47.616C48.8632 48.576 54.1912 49.68 58.4152 50.928C62.6392 52.176 66.2872 54.48 69.3592 57.84C72.5272 61.104 74.1112 65.712 74.1112 71.664C74.1112 76.56 72.6232 80.976 69.6472 84.912C66.6712 88.752 62.2552 91.776 56.3992 93.984C50.6392 96.192 43.6792 97.296 35.5192 97.296Z" stroke="#FF8B60" mask="url(#path-1-outside-1)" />
                    <path d="M137.453 92.256C135.245 93.888 132.509 95.136 129.245 96C126.077 96.768 122.717 97.152 119.165 97.152C109.949 97.152 102.797 94.8 97.7092 90.096C92.7172 85.392 90.2212 78.48 90.2212 69.36V37.536H78.2692V20.256H90.2212V1.392H112.685V20.256H131.981V37.536H112.685V69.072C112.685 72.336 113.501 74.88 115.133 76.704C116.861 78.432 119.261 79.296 122.333 79.296C125.885 79.296 128.909 78.336 131.405 76.416L137.453 92.256Z" stroke="#FF8B60" mask="url(#path-1-outside-1)" />
                    <path d="M187.647 97.296C179.295 97.296 171.759 95.568 165.039 92.112C158.319 88.656 153.039 83.856 149.199 77.712C145.455 71.568 143.583 64.608 143.583 56.832C143.583 49.152 145.455 42.24 149.199 36.096C153.039 29.952 158.271 25.2 164.895 21.84C171.615 18.384 179.199 16.656 187.647 16.656C196.095 16.656 203.679 18.384 210.399 21.84C217.119 25.2 222.351 29.952 226.095 36.096C229.839 42.144 231.711 49.056 231.711 56.832C231.711 64.608 229.839 71.568 226.095 77.712C222.351 83.856 217.119 88.656 210.399 92.112C203.679 95.568 196.095 97.296 187.647 97.296ZM187.647 75.552C192.447 75.552 196.383 73.92 199.455 70.656C202.527 67.296 204.063 62.688 204.063 56.832C204.063 51.072 202.527 46.56 199.455 43.296C196.383 40.032 192.447 38.4 187.647 38.4C182.847 38.4 178.911 40.032 175.839 43.296C172.767 46.56 171.231 51.072 171.231 56.832C171.231 62.688 172.767 67.296 175.839 70.656C178.911 73.92 182.847 75.552 187.647 75.552Z" stroke="#FF8B60" mask="url(#path-1-outside-1)" />
                    <path d="M270.45 27.312C273.234 23.76 276.834 21.12 281.25 19.392C285.762 17.568 290.898 16.656 296.658 16.656V41.28C294.162 40.992 292.098 40.848 290.466 40.848C284.61 40.848 280.002 42.432 276.642 45.6C273.378 48.768 271.746 53.616 271.746 60.144V96H244.386V17.952H270.45V27.312Z" stroke="#FF8B60" mask="url(#path-1-outside-1)" />
                    <path d="M409.612 16.656C419.212 16.656 426.844 19.536 432.508 25.296C438.268 31.056 441.148 39.744 441.148 51.36V96H413.788V55.824C413.788 50.352 412.732 46.32 410.62 43.728C408.604 41.136 405.724 39.84 401.98 39.84C397.852 39.84 394.54 41.28 392.044 44.16C389.548 47.04 388.3 51.408 388.3 57.264V96H360.94V55.824C360.94 45.168 357.004 39.84 349.132 39.84C344.908 39.84 341.548 41.28 339.052 44.16C336.556 47.04 335.308 51.408 335.308 57.264V96H307.948V17.952H334.012V26.16C336.892 22.992 340.3 20.64 344.236 19.104C348.268 17.472 352.636 16.656 357.34 16.656C362.812 16.656 367.708 17.664 372.028 19.68C376.348 21.696 379.852 24.768 382.54 28.896C385.612 24.96 389.5 21.936 394.204 19.824C398.908 17.712 404.044 16.656 409.612 16.656Z" stroke="#FF8B60" mask="url(#path-1-outside-1)" />
                    <path d="M186.204 200.532V246.578C186.204 259.001 182.611 268.6 175.424 275.376C168.34 282.049 158.33 285.386 145.394 285.386C133.279 285.386 124.091 281.844 117.828 274.76C111.771 281.844 102.633 285.386 90.4159 285.386C77.3772 285.386 67.3159 282.049 60.2319 275.376C53.2505 268.6 49.7599 259.001 49.7599 246.578V200.532H79.0199V244.576C79.0199 250.428 79.9952 254.74 81.9459 257.512C83.8965 260.181 86.9252 261.516 91.0319 261.516C95.1385 261.516 98.2185 260.13 100.272 257.358C102.325 254.586 103.352 250.325 103.352 244.576V200.532H132.612V244.576C132.612 250.325 133.639 254.586 135.692 257.358C137.745 260.13 140.825 261.516 144.932 261.516C149.039 261.516 152.067 260.181 154.018 257.512C155.969 254.74 156.944 250.428 156.944 244.576V200.532H186.204Z" stroke="#FF8B60" mask="url(#path-1-outside-1)" />
                    <path d="M249.179 263.056C253.183 263.056 256.622 262.491 259.497 261.362C262.474 260.233 265.452 258.385 268.429 255.818L283.675 271.834C275.77 280.869 263.963 285.386 248.255 285.386C238.502 285.386 229.929 283.538 222.537 279.842C215.145 276.146 209.396 271.013 205.289 264.442C201.285 257.871 199.283 250.428 199.283 242.112C199.283 233.899 201.285 226.558 205.289 220.09C209.293 213.519 214.786 208.386 221.767 204.69C228.851 200.994 236.756 199.146 245.483 199.146C253.594 199.146 260.986 200.84 267.659 204.228C274.435 207.513 279.825 212.39 283.829 218.858C287.833 225.223 289.835 232.821 289.835 241.65L230.237 253.046C233.42 259.719 239.734 263.056 249.179 263.056ZM245.637 219.936C240.606 219.936 236.5 221.527 233.317 224.71C230.134 227.79 228.338 232.256 227.927 238.108L261.807 231.486C260.78 227.995 258.83 225.223 255.955 223.17C253.08 221.014 249.641 219.936 245.637 219.936Z" stroke="#FF8B60" mask="url(#path-1-outside-1)" />
                    <path d="M335.82 285.386C325.553 285.386 317.545 282.768 311.796 277.532C306.149 272.193 303.326 264.596 303.326 254.74V169.732H332.586V253.2C332.586 256.28 333.356 258.641 334.896 260.284C336.538 261.927 338.797 262.748 341.672 262.748C344.033 262.748 346.24 262.235 348.294 261.208L349.526 283.23C345.111 284.667 340.542 285.386 335.82 285.386Z" stroke="#FF8B60" mask="url(#path-1-outside-1)" />
                    <path d="M392.517 285.386C382.25 285.386 374.242 282.768 368.493 277.532C362.846 272.193 360.023 264.596 360.023 254.74V169.732H389.283V253.2C389.283 256.28 390.053 258.641 391.593 260.284C393.236 261.927 395.494 262.748 398.369 262.748C400.73 262.748 402.938 262.235 404.991 261.208L406.223 283.23C401.808 284.667 397.24 285.386 392.517 285.386Z" stroke="#FF8B60" mask="url(#path-1-outside-1)" />
                </svg>  */}
                <svg className={`stormwell ${!firstTime ? 'no-trace' : ''} stormwell--desktop`} width="1103" height="152" viewBox="0 0 1103 152" fill="none" xmlns="http://www.w3.org/2000/svg">
                    <path d="M49.6 150.8C40.5333 150.8 31.6 149.8 22.8 147.8C14 145.667 6.93331 142.933 1.59998 139.6L13 113.6C17.9333 116.667 23.8 119.133 30.6 121C37.4 122.733 44.1333 123.6 50.8 123.6C56.9333 123.6 61.2666 123 63.8 121.8C66.4666 120.467 67.8 118.6 67.8 116.2C67.8 113.8 66.2 112.133 63 111.2C59.9333 110.133 55 109.133 48.2 108.2C39.5333 107.133 32.1333 105.733 26 104C20 102.267 14.8 99.0666 10.4 94.4C5.99998 89.7333 3.79998 83.2 3.79998 74.8C3.79998 67.8666 5.86664 61.7333 9.99998 56.4C14.1333 50.9333 20.1333 46.6667 28 43.6C36 40.4 45.5333 38.8 56.6 38.8C64.4666 38.8 72.2667 39.6 80 41.2C87.7333 42.8 94.2 45.0666 99.4 48L88 73.8C78.4 68.4666 68 65.8 56.8 65.8C50.8 65.8 46.4 66.5333 43.6 68C40.8 69.3333 39.4 71.1333 39.4 73.4C39.4 75.9333 40.9333 77.7333 44 78.8C47.0666 79.7333 52.1333 80.7333 59.2 81.8C68.1333 83.1333 75.5333 84.6666 81.4 86.4C87.2666 88.1333 92.3333 91.3333 96.6 96C101 100.533 103.2 106.933 103.2 115.2C103.2 122 101.133 128.133 97 133.6C92.8666 138.933 86.7333 143.133 78.6 146.2C70.6 149.267 60.9333 150.8 49.6 150.8Z" stroke="black" mask="url(#path-1-outside-1)" />
                    <path d="M194.375 144.6C191.175 146.6 187.242 148.133 182.575 149.2C178.042 150.267 173.175 150.8 167.975 150.8C153.842 150.8 142.975 147.333 135.375 140.4C127.775 133.467 123.975 123.133 123.975 109.4V73H108.175V44.6H123.975V16.4H161.975V44.6H186.775V73H161.975V109C161.975 112.867 162.975 115.933 164.975 118.2C167.108 120.333 169.908 121.4 173.375 121.4C177.775 121.4 181.642 120.267 184.975 118L194.375 144.6Z" stroke="black" mask="url(#path-1-outside-1)" />
                    <path d="M263.428 150.8C251.828 150.8 241.361 148.4 232.028 143.6C222.695 138.8 215.361 132.133 210.028 123.6C204.828 115.067 202.228 105.4 202.228 94.6C202.228 83.9333 204.828 74.3333 210.028 65.8C215.361 57.2666 222.628 50.6666 231.828 46C241.161 41.2 251.695 38.8 263.428 38.8C275.161 38.8 285.695 41.2 295.028 46C304.361 50.6666 311.628 57.2666 316.828 65.8C322.028 74.2 324.628 83.8 324.628 94.6C324.628 105.4 322.028 115.067 316.828 123.6C311.628 132.133 304.361 138.8 295.028 143.6C285.695 148.4 275.161 150.8 263.428 150.8ZM263.428 120.6C270.095 120.6 275.561 118.333 279.828 113.8C284.095 109.133 286.228 102.733 286.228 94.6C286.228 86.6 284.095 80.3333 279.828 75.8C275.561 71.2666 270.095 69 263.428 69C256.761 69 251.295 71.2666 247.028 75.8C242.761 80.3333 240.628 86.6 240.628 94.6C240.628 102.733 242.761 109.133 247.028 113.8C251.295 118.333 256.761 120.6 263.428 120.6Z" stroke="black" mask="url(#path-1-outside-1)" />
                    <path d="M378.431 53.6C382.298 48.6666 387.298 45 393.431 42.6C399.698 40.0667 406.831 38.8 414.831 38.8V73C411.365 72.6 408.498 72.4 406.231 72.4C398.098 72.4 391.698 74.6 387.031 79C382.498 83.4 380.231 90.1333 380.231 99.2V149H342.231V40.6H378.431V53.6Z" stroke="black" mask="url(#path-1-outside-1)" />
                    <path d="M571.713 38.8C585.046 38.8 595.646 42.8 603.513 50.8C611.513 58.8 615.513 70.8666 615.513 87V149H577.513V93.2C577.513 85.6 576.046 80 573.112 76.4C570.312 72.8 566.312 71 561.112 71C555.379 71 550.779 73 547.312 77C543.846 81 542.112 87.0666 542.112 95.2V149H504.112V93.2C504.112 78.4 498.646 71 487.712 71C481.846 71 477.179 73 473.712 77C470.246 81 468.512 87.0666 468.512 95.2V149H430.512V40.6H466.712V52C470.712 47.6 475.446 44.3333 480.912 42.2C486.512 39.9333 492.579 38.8 499.112 38.8C506.712 38.8 513.513 40.2 519.513 43C525.513 45.8 530.379 50.0666 534.112 55.8C538.379 50.3333 543.779 46.1333 550.312 43.2C556.846 40.2666 563.979 38.8 571.713 38.8Z" stroke="black" mask="url(#path-1-outside-1)" />
                    <path d="M816.297 40.6V100.4C816.297 116.533 811.63 129 802.297 137.8C793.097 146.467 780.097 150.8 763.297 150.8C747.564 150.8 735.63 146.2 727.497 137C719.63 146.2 707.764 150.8 691.897 150.8C674.964 150.8 661.897 146.467 652.697 137.8C643.63 129 639.097 116.533 639.097 100.4V40.6H677.097V97.8C677.097 105.4 678.364 111 680.897 114.6C683.43 118.067 687.364 119.8 692.697 119.8C698.03 119.8 702.03 118 704.697 114.4C707.364 110.8 708.697 105.267 708.697 97.8V40.6H746.697V97.8C746.697 105.267 748.03 110.8 750.697 114.4C753.364 118 757.364 119.8 762.697 119.8C768.03 119.8 771.964 118.067 774.497 114.6C777.03 111 778.297 105.4 778.297 97.8V40.6H816.297Z" stroke="black" mask="url(#path-1-outside-1)" />
                    <path d="M898.083 121.8C903.283 121.8 907.749 121.067 911.483 119.6C915.349 118.133 919.216 115.733 923.083 112.4L942.883 133.2C932.616 144.933 917.283 150.8 896.883 150.8C884.216 150.8 873.083 148.4 863.483 143.6C853.883 138.8 846.416 132.133 841.083 123.6C835.883 115.067 833.283 105.4 833.283 94.6C833.283 83.9333 835.883 74.4 841.083 66C846.283 57.4666 853.416 50.8 862.483 46C871.683 41.2 881.95 38.8 893.283 38.8C903.816 38.8 913.416 41 922.083 45.4C930.883 49.6666 937.883 56 943.083 64.4C948.283 72.6666 950.883 82.5333 950.883 94L873.483 108.8C877.616 117.467 885.816 121.8 898.083 121.8ZM893.483 65.8C886.949 65.8 881.616 67.8666 877.483 72C873.349 76 871.016 81.8 870.483 89.4L914.483 80.8C913.149 76.2666 910.616 72.6666 906.883 70C903.149 67.2 898.683 65.8 893.483 65.8Z" stroke="black" mask="url(#path-1-outside-1)" />
                    <path d="M1010.6 150.8C997.27 150.8 986.87 147.4 979.403 140.6C972.07 133.667 968.403 123.8 968.403 111V0.599976H1006.4V109C1006.4 113 1007.4 116.067 1009.4 118.2C1011.54 120.333 1014.47 121.4 1018.2 121.4C1021.27 121.4 1024.14 120.733 1026.8 119.4L1028.4 148C1022.67 149.867 1016.74 150.8 1010.6 150.8Z" stroke="black" mask="url(#path-1-outside-1)" />
                    <path d="M1084.24 150.8C1070.9 150.8 1060.5 147.4 1053.04 140.6C1045.7 133.667 1042.04 123.8 1042.04 111V0.599976H1080.04V109C1080.04 113 1081.04 116.067 1083.04 118.2C1085.17 120.333 1088.1 121.4 1091.84 121.4C1094.9 121.4 1097.77 120.733 1100.44 119.4L1102.04 148C1096.3 149.867 1090.37 150.8 1084.24 150.8Z" stroke="black" mask="url(#path-1-outside-1)" />
                </svg>
                <p className={`textbox__vodka ${!firstTime ? 'visible' : ''}`}>A brand new vodka</p>
                <img className={`lime ${!firstTime ? 'visible': ''}`} src={lime} alt="Lime" />
            </div>
            <div className="hero__img__container">
                <img className="hero__img" src={hero} alt="Vodka and lime" />
                <img className="ice ice--medium" src={medium} alt="" />
                <img className="ice ice--small" src={small} alt="" />
                <img className="ice ice--large" src={large} alt="" />
                <img className="ice ice--medium--2" src={medium} alt="" />
            </div>
        </section>
    )
}

export default Hero